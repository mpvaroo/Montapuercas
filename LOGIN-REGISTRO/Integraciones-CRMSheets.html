<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Integraciones ¬∑ CRM & Sheets | AutomAI Solutions</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body{background:#f8f9fa;font-family:'Segoe UI',sans-serif;overflow-x:hidden}
    .sidebar{width:240px;height:100vh;background:#fff;position:fixed;left:0;top:0;box-shadow:2px 0 10px rgba(0,0,0,.1);padding-top:1.5rem}
    .sidebar h4{text-align:center;color:#0077b6;margin-bottom:2rem}
    .sidebar a{display:block;color:#333;text-decoration:none;padding:10px 20px;border-radius:6px;margin:4px 10px;transition:.2s}
    .sidebar a:hover,.sidebar a.active{background:#0077b6;color:#fff}
    .navbar-top{margin-left:240px;height:60px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;position:sticky;top:0;z-index:100}
    .main-content{margin-left:240px;padding:2rem}
    .section-card{background:#fff;border:none;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
    .btn-primary{background:#0077b6;border:none}
    .btn-primary:hover{background:#005f8c}
    .small-help{font-size:.85rem;color:#6c757d}
    .badge-dot{display:inline-flex;align-items:center;gap:.4rem}
    .dot{width:8px;height:8px;border-radius:50%}
    .dot-ok{background:#28a745}.dot-warn{background:#ffc107}.dot-off{background:#6c757d}
    footer{text-align:center;padding:1rem;font-size:.9rem;color:#777;margin-top:3rem}
    .map-table td,.map-table th{vertical-align:middle}
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <h4>AutomAI</h4>
    <a href="dashboard.html">üè† Dashboard</a>
    <a href="chatbot-configuracion.html">ü§ñ Configurar Chatbot</a>
    <a href="integraciones-canales.html">üîå Canales</a>
    <a href="integraciones-crm-sheets.html" class="active">üß© CRM & Sheets</a>
    <a href="integraciones-historial.html">üóÇÔ∏è Historial</a>
    <a href="#">üìä Reportes</a>
    <a href="#">üë• Usuarios</a>
    <a href="#">‚öôÔ∏è Ajustes</a>
    <a href="#">üí¨ Soporte</a>
    <hr>
    <a href="#" class="text-danger">üö™ Cerrar sesi√≥n</a>
  </aside>

  <!-- Navbar -->
  <nav class="navbar-top">
    <h5 class="m-0">Integraciones ¬∑ CRM & Google Sheets</h5>
    <div class="user-info">
      <span class="text-muted small me-2">Usuario: <strong>admin@empresa.com</strong></span>
      <img src="https://cdn-icons-png.flaticon.com/512/3177/3177440.png" alt="Usuario" width="35" height="35" class="rounded-circle">
    </div>
  </nav>

  <!-- Main -->
  <main class="main-content">
    <div class="row g-4">
      <!-- CRM -->
      <div class="col-12 col-xl-6">
        <div class="card section-card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title m-0">Conexi√≥n CRM</h5>
              <span class="badge bg-secondary badge-dot"><span class="dot dot-off"></span>No conectado</span>
            </div>
            <p class="small-help mb-3">Conecta tu CRM para guardar leads, tickets o contactos creados por el chatbot.</p>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Proveedor</label>
                <select class="form-select">
                  <option selected>HubSpot</option>
                  <option>Zoho CRM</option>
                  <option>Pipedrive</option>
                  <option>Otro (API)</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">Regi√≥n / Data center</label>
                <select class="form-select">
                  <option>EU</option>
                  <option selected>US</option>
                </select>
              </div>
              <div class="col-md-12">
                <label class="form-label">API Key / OAuth Token</label>
                <input type="text" class="form-control" placeholder="hs_api_key_************************">
                <div class="small-help mt-1">Genera tu clave en el panel del CRM. Para OAuth, usa el flujo guiado.</div>
              </div>
              <div class="col-md-12">
                <label class="form-label">Webhook URL (para eventos)</label>
                <div class="input-group">
                  <input type="text" class="form-control" value="https://api.automai.solutions/webhooks/crm" readonly>
                  <button class="btn btn-outline-secondary">Copiar</button>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end gap-2 mt-3">
              <button class="btn btn-outline-primary btn-sm">Conectar</button>
              <button class="btn btn-outline-secondary btn-sm">Probar</button>
              <button class="btn btn-outline-danger btn-sm">Desconectar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Google Sheets -->
      <div class="col-12 col-xl-6">
        <div class="card section-card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title m-0">Google Sheets</h5>
              <span class="badge bg-warning text-dark badge-dot"><span class="dot dot-warn"></span>Conectado (revisar)</span>
            </div>
            <p class="small-help mb-3">Sincroniza registros del chatbot con una hoja de c√°lculo para reportes y backups.</p>
            <div class="row g-3">
              <div class="col-md-8">
                <label class="form-label">Spreadsheet ID</label>
                <input type="text" class="form-control" placeholder="1AbCDefGhIJKlmNOPqRstuVWXYZ1234567890">
              </div>
              <div class="col-md-4">
                <label class="form-label">Rango</label>
                <input type="text" class="form-control" placeholder="Leads!A1:D5000">
              </div>
              <div class="col-12">
                <label class="form-label">Service Account (email)</label>
                <input type="email" class="form-control" placeholder="automai-service@project.iam.gserviceaccount.com">
                <div class="small-help mt-1">Recuerda compartir la hoja con este email para dar permisos de escritura.</div>
              </div>
            </div>
            <div class="d-flex justify-content-end gap-2 mt-3">
              <button class="btn btn-outline-primary btn-sm">Validar acceso</button>
              <button class="btn btn-outline-secondary btn-sm">Probar escritura</button>
              <button class="btn btn-outline-danger btn-sm">Desconectar</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Mapeo de campos -->
      <div class="col-12">
        <div class="card section-card">
          <div class="card-body">
            <h5 class="card-title mb-3">Mapeo de campos (Chatbot ‚Üí CRM/Sheets)</h5>
            <p class="small-help">Define c√≥mo se guardan los datos capturados por el bot en tu CRM o en Google Sheets.</p>
            <div class="table-responsive">
              <table class="table table-striped align-middle map-table">
                <thead class="table-light">
                  <tr>
                    <th>Origen (Chatbot)</th>
                    <th>Destino (CRM)</th>
                    <th>Destino (Sheets)</th>
                    <th>Transformaci√≥n</th>
                    <th class="text-end">Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Nombre</td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>contacts.firstname</option>
                        <option>contacts.lastname</option>
                        <option>deals.title</option>
                      </select>
                    </td>
                    <td><input type="text" class="form-control form-control-sm" value="A"></td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>Ninguna</option>
                        <option>May√∫sculas</option>
                        <option>Trim espacios</option>
                      </select>
                    </td>
                    <td class="text-end">
                      <button class="btn btn-outline-primary btn-sm">Editar</button>
                      <button class="btn btn-outline-danger btn-sm">Eliminar</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Email</td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>contacts.email</option>
                        <option>tickets.requester_email</option>
                      </select>
                    </td>
                    <td><input type="text" class="form-control form-control-sm" value="B"></td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>Validar email</option>
                        <option>Ninguna</option>
                      </select>
                    </td>
                    <td class="text-end">
                      <button class="btn btn-outline-primary btn-sm">Editar</button>
                      <button class="btn btn-outline-danger btn-sm">Eliminar</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Mensaje</td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>tickets.description</option>
                        <option>deals.notes</option>
                      </select>
                    </td>
                    <td><input type="text" class="form-control form-control-sm" value="C"></td>
                    <td>
                      <select class="form-select form-select-sm">
                        <option selected>Trim espacios</option>
                        <option>Ninguna</option>
                      </select>
                    </td>
                    <td class="text-end">
                      <button class="btn btn-outline-primary btn-sm">Editar</button>
                      <button class="btn btn-outline-danger btn-sm">Eliminar</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <button class="btn btn-outline-secondary btn-sm">‚ûï A√±adir mapeo</button>
          </div>
        </div>
      </div>

      <!-- Sincronizaci√≥n -->
      <div class="col-12">
        <div class="card section-card">
          <div class="card-body">
            <h5 class="card-title mb-3">Sincronizaci√≥n</h5>
            <div class="row g-3 align-items-end">
              <div class="col-md-4">
                <label class="form-label">Modo</label>
                <select class="form-select">
                  <option selected>Manual (a demanda)</option>
                  <option>Autom√°tica programada</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label">Frecuencia</label>
                <select class="form-select">
                  <option>Cada 15 minutos</option>
                  <option selected>Cada hora</option>
                  <option>Diaria (00:00)</option>
                </select>
              </div>
              <div class="col-md-4 d-flex justify-content-end gap-2">
                <button class="btn btn-outline-primary">Probar sincronizaci√≥n</button>
                <button class="btn btn-primary">Guardar programaci√≥n</button>
              </div>
            </div>
            <hr>
            <div class="row g-3">
              <div class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted">√öltima sincronizaci√≥n</div>
                  <div class="fw-bold">Hace 2 h ¬∑ 12:14</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted">Registros procesados</div>
                  <div class="fw-bold">148 (145 ok ¬∑ 3 con aviso)</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted">Estado</div>
                  <div class="fw-bold text-success">Correcto</div>
                </div>
              </div>
            </div>
            <div class="text-end mt-3">
              <a href="Integraciones-Historial.html" class="btn btn-outline-secondary btn-sm">Ver historial de sincronizaci√≥n</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>¬© 2025 AutomAI Solutions ¬∑ Integraciones CRM & Sheets</footer>
  </main>
</body>
</html>
